<html>
<head>
  <title>Сервер тестирования</title>

    <meta charset="UTF-8">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/uikit.min.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/uikit-rtl.min.css') }}" />
    <script src="{{ url_for('static', filename='js/uikit.min.js') }}" ></script>
    <script src="{{ url_for('static', filename='js/uikit-icons.min.js') }}" ></script>

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=" crossorigin="anonymous"></script>
</head>
<body>

  <div class="uk-section-large uk-section-muted uk-flex uk-flex-middle uk-animation-fade">
	<div class="uk-width-1-1">
		<div class="uk-container">
            <div class="uk-margin uk-width-large uk-margin-auto uk-card uk-card-default uk-card-body uk-box-shadow-large" >
                {% if json %}
                    {% if "Ошибка" in json.status %}
                        <div class="uk-alert-danger" uk-alert>
                            <p> {{ json.errorMessage }} </p>
                            {% if json.test %}
                            <p> Тест: {{ json.test }} </p>
                            {% endif %}
                            {% if json.test %}
                            <p> Правильный ответ: {{ json.answer }} </p>
                            {% endif %}
                            <a class="uk-alert-close" uk-close></a>
                        </div>
                    {% elif "Успех" in json.status %}
                        <div class="uk-alert-success" uk-alert>
                            <p> {{ json.message }} </p>
                            <a class="uk-alert-close" uk-close></a>
                        </div>
                    {% endif %}
                {% endif %}
                <h3 class="uk-card-title uk-text-center">Выберите задачу для тестирования</h3>
                <form action="{{ url_for('send_file')}}" method="post" enctype="multipart/form-data">
                    <div class="uk-placeholder uk-text-center" id="file-box">
                        <span uk-icon="icon: cloud-upload"></span>
                        <span class="uk-text-middle">Приложите файл с исходным кодом</span>
                        <div uk-form-custom>
                            <input type="file" id="file" name="file">
                            <span class="uk-link">или выберите один</span>
                        </div>
                    </div>
                    <div id="fileName"></div>
                    <progress id="js-progressbar" class="uk-progress" value="0" max="100" hidden></progress>
                    <div class="uk-margin">
                        <select class="uk-select uk-width-1-1" name="task">
                          <option disabled>Выберите задачу</option>
                          <option value="dz3">Домашнее задание №3</option>
                          <option value="lab4_5">Лабораторная №4. Локальные определения</option>
                          <option value="lab4_6">Лабораторная №4. Управляющие конструкции</option>
                          <option value="dz4_1">Домашнее задание №4. Мемоизация. Отложенные вычисления</option>
                          <option value="dz4_2">Домашнее задание №4. Чтение из потока</option>
                          <option value="dz4_3">Домашнее задание №4. Алгебраические типы данных</option>
                          <option disabled value="other">скоро будут добавлены другие задачи...</option>
                        </select>
                    </div>
                    <div class="uk-margin">
                        <button type="submit" class="uk-button uk-button-primary uk-button-large uk-width-1-1">Загрузить</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
  </div>


</body>
<script>
    $("input:file").change(function (e){
       var fileName = e.target.files[0].name;
       if (fileName !== undefined) {
           $("#fileName").text("Вы прикрепили: " + fileName);
       }
     });
</script>

</html>